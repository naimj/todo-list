const handleSelect = (id) => {
  if (!props.selectable) return

  if (props.multiple) {
    const newSelected = new Set(selectedIds.value)
    const parent = findNodeById(props.items, id)

    if (newSelected.has(id)) {
      newSelected.delete(id)
    } else {
      newSelected.add(id)
      parent?.children && collectIds(parent.children).forEach(cid => newSelected.delete(cid))
    }

    emit('update:modelValue', [...newSelected])
  } else {
    emit('update:modelValue', selectedIds.value.has(id) ? null : id)
  }
}
